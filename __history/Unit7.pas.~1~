unit Unit7;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, IdAntiFreezeBase, IdAntiFreeze, IdBaseComponent, IdMessage,
  StdCtrls, IdComponent, IdTCPConnection, IdTCPClient, IdMessageClient,
  IdSMTP, IdIOHandler, IdIOHandlerSocket, IdSSLOpenSSL;

type
  TForm7 = class(TForm)
    btn1: TButton;
    edt1: TEdit;
    edt2: TEdit;
    btn2: TButton;
    btn3: TButton;
    idntfrz1: TIdAntiFreeze;
    idsmtp2: TIdSMTP;
    IdSSLIOHandlerSocket1: TIdSSLIOHandlerSocket;
    procedure btn1Click(Sender: TObject);
    procedure btn2Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form7: TForm7;

implementation

uses Unit3;

{$R *.dfm}

procedure TForm7.btn1Click(Sender: TObject);
begin
Form3.show;
form7.Close;
end;

procedure TForm7.btn2Click(Sender: TObject);
begin
 idsmtp2.host:='smtp.yandex.by';
 IdSMTP2.Port:=465;
   idsmtp2.username:='davidrad4enko@yandex.by' ;
    idsmtp2.password:='qwerty2018';
     idsmtp2.authtype:=satdefault;
      idsmtp2.connect;
      if   idsmtp2.Connected=true  then
      begin
        form6.show;
        form7.Hide
      end;




end;

end.
/???????? SMTP ??????. ? ?????? ?????? ????? yandex.
IdSMTP1.Host:= 'smtp.yandex.ru';
//??? ????? (??? ????????? ?????????? ?????? ? ???????).
IdSMTP1.Username:= 'test@yandex.ru';
//?????? ?? ?????.
IdSMTP1.Password:= 'qwerty123';
//????, ??????????? ???????????? 587.
IdSMTP1.Port:=587;
 
//? Edit2 ????? ??????????? ???? ??????.
IdMessage1.Subject:= Edit2.Text;
//? Edit1 ????? ????? ??????????.
IdMessage1.Recipients.EMailAddresses:= Edit1.Text;
//??? email ? ???????? ???? ????????.
IdMessage1.From.Address:= 'test@yandex.ru';
//? memo1 ????? ????? ??????? ?? ?????? ???????.
IdMessage1.Body.Text:= memo1.Text ;
//? Edit3 ????? ???? ??????????? ??????? (???).
IdMessage1.From.Name:= Edit3.Text;
 
//???????????
IdSMTP1.connect;
//??????????
IdSMTP1.Send(IdMessage1);
//?????????????
IdSMTP1.Disconnect;
